(function(){var a;a=pimatic.tryCatch,$(document).ready(a(function(){var a,b;return a=function(){function a(){}return a.prototype.showLoginDialog=function(){return pimatic.socket.io.disconnect(),jQuery.mobile.changePage("#login-page",{transition:"flip"})},a.prototype.hideLoginDialog=function(){return jQuery.mobile.changePage("#index",{transition:"flip"})},a}(),pimatic.pages.login=b=new a})),$(document).on("pagebeforeshow","#login-page",function(){var a;return(null!=(a=pimatic.socket.io)?a.connected:void 0)?(pimatic.pages.login.hideLoginDialog(),!1):!0}),$(document).on("submit","#login-page #loginForm",a(function(a){return $.ajax({type:"POST",url:"/login",data:$("#loginForm").serialize()}).done(function(){return pimatic.loading("socket","show",{text:__("Connecting"),blocking:!1}),setTimeout(function(){return pimatic.socket.io.disconnect(),pimatic.socket.io.reconnect()},1)}).fail(ajaxAlertFail),a.preventDefault(),!1}))}).call(this);