(function(){var a,b;b=pimatic.tryCatch,a=function(){function a(){this.devices=pimatic.devices,this.refreshDeviceListView=ko.computed(function(a){return function(){return a.devices(),pimatic["try"](function(){return $("#device-items").listview("refresh")})}}(this)).extend({rateLimit:{timeout:10,method:"notifyWhenChangesStop"}})}return a.prototype.addDeviceToIndexPage=function(a){return a.isAdded()?void 0:$.get("/add-device/"+a.id).done(ajaxShowToast).fail(ajaxAlertFail)},a.prototype.addVariableToIndexPage=function(a){return a.isAdded()?void 0:$.get("/add-variable/"+a.name).done(ajaxShowToast).fail(ajaxAlertFail)},a}(),b(function(){return function(){return pimatic.pages.addItem=new a}}(this))(),$(document).on("pagecreate","#add-item",b(function(){ko.applyBindings(pimatic.pages.addItem,$("#add-item")[0]),$("#device-items").on("click","li.item",b(function(){var a;a=$(this),pimatic.pages.addItem.addDeviceToIndexPage(ko.dataFor(a[0]))})),$("#variable-items").on("click","li.item",b(function(){var a;a=$(this),pimatic.pages.addItem.addVariableToIndexPage(ko.dataFor(a[0]))})),$("#add-other").on("click","#add-a-header",b(function(){$("<div>").simpledialog2({themeDialog:"a",themeButtonDefault:"b",mode:"button",headerText:__("Name"),headerClose:!0,buttonPrompt:__("Please enter a name"),buttonInput:!0,zindex:1001,buttons:{OK:{text:__("Add"),click:function(){var a;return a=$.mobile.sdLastInput,""===a?pimatic.showToast(__("Please enter a name")):$.get("/add-header/"+a).done(function(){return pimatic.showToast(__("Header added"))}).fail(ajaxAlertFail)}}}}),setTimeout(function(){return $(".ui-simpledialog-input").focus()},1)})),$("#add-other").on("click","#add-a-button",b(function(){$("<div>").simpledialog2({themeDialog:"a",themeButtonDefault:"b",mode:"button",headerText:__("Name"),headerClose:!0,buttonPrompt:__("Please enter a name"),buttonInput:!0,zindex:1001,buttons:{OK:{text:__("Add"),click:function(){var a;return a=$.mobile.sdLastInput,""===a?pimatic.showToast(__("Please enter a name")):$.get("/add-button/"+a).done(function(){return pimatic.showToast(__("Button added"))}).fail(ajaxAlertFail)}}}}),setTimeout(function(){return $(".ui-simpledialog-input").focus()},1)}))})),$(document).on("pageshow","#add-item",b(function(){}))}).call(this);