(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=pimatic.tryCatch,$(document).on("pagecreate","#database",a(function(){var c,d,e;c=function(){function c(){this.deleteDeviceAttribute=b(this.deleteDeviceAttribute,this),this.hasPermission=pimatic.hasPermission,this.updateFromJs([]),this.updateListView=ko.computed(function(a){return function(){return a.problems(),pimatic["try"](function(){return $("#log-messages").listview("refresh")})}}(this))}return c.mapping={$default:"ignore",problems:{$key:"id",$itemOptions:{$handler:"copy"}}},c.prototype.updateFromJs=function(a){return ko.mapper.fromJS({problems:a},c.mapping,this)},c.prototype.deleteDeviceAttribute=function(b){return pimatic.client.rest.deleteDeviceAttribute({id:b.id}).done(a(function(a){return function(c){c.success&&a.problems.remove(function(a){return a.id===b.id})}}(this))).fail(ajaxAlertFail)},c.prototype.checkDatabase=function(){var b;return b=function(b){return function(){return null==b.loadProblemsAjax?(pimatic.loading("databasecheck","show",{text:__("Checking Database")}),pimatic.client.rest.checkDatabase({},{timeout:6e4,global:!1}).always(function(){return pimatic.loading("databasecheck","hide")}).done(a(function(a){b.loadProblemsAjax=null,a.success&&b.updateFromJs(a.problems)})).fail(ajaxAlertFail)):void 0}}(this),null==this.loadProblemsAjax?b():this.loadProblemsAjax.done(function(){return function(){return b()}}(this))},c}();try{pimatic.pages.database=d=new c,ko.applyBindings(d,$("#database")[0])}catch(f){e=f,TraceKit.report(e)}})),$(document).on("pagebeforeshow","#database",a(function(){var a,b;try{return a=pimatic.pages.database,a.checkDatabase()}catch(c){return b=c,TraceKit.report(b)}}))}).call(this);