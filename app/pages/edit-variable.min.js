(function(){$(document).on("pagebeforecreate",function(){var a,b;if(null==pimatic.pages.editVariable){a=function(){function a(){this.pageTitle=ko.computed(function(a){return function(){return __("add"===a.action()?"Add new variable":"Edit variable")}}(this)),this.valueLabelText=ko.computed(function(a){return function(){return __("value"===a.variableType()?"Value":"Expr.")}}(this))}return a.prototype.autocompleteAjax=null,a.prototype.autocompleEnabled=!1,a.prototype.action=ko.observable("add"),a.prototype.variableName=ko.observable(""),a.prototype.variableValue=ko.observable(""),a.prototype.variableType=ko.observable("value"),a.prototype.resetFields=function(){return this.variableName(""),this.variableValue(""),this.variableType("value")},a.prototype.onSubmit=function(){var a;switch(a={name:this.variableName()},this.variableType()){case"value":a.value=this.variableValue();break;case"expression":a.expression=this.variableValue()}return $.post("/api/variable/"+this.variableName()+"/"+this.action(),a).done(function(a){return a.success?$.mobile.changePage("#index",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1},a.prototype.onRemove=function(){return $.get("/api/variable/"+this.variableName()+"/remove").done(function(a){return a.success?$.mobile.changePage("#index",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1},a}();try{pimatic.pages.editVariable=new a}catch(c){b=c,TraceKit.report(b)}}}),$(document).on("pagecreate","#edit-variable",function(){var a;try{return ko.applyBindings(pimatic.pages.editVariable,$("#edit-variable")[0])}catch(b){return a=b,TraceKit.report(a)}})}).call(this);