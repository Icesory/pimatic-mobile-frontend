!function(a,b){var c=a.mobiscroll,d=c.util,e=d.isString,f={inputClass:"",invalid:[],rtl:!1,showInput:!0,group:!1,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};c.presetShort("select"),c.presets.scroller.select=function(c){function g(){var c,d,e,f,g,h=0,i={};s=[],K?a.each(J,function(a,j){f=j[z.dataText],g=j[z.dataValue],d=j[z.dataGroup],e={value:g,text:f},S[g]=e,s.push(e),L&&(i[d]===b?(c={label:d,options:[]},T[h]=c,i[d]=h,h++):c=T[i[d]],e.group=i[d],c.options.push(e)),j[z.dataDisabled]&&Q.push(g)}):L?a("optgroup",C).each(function(b){T[b]={label:this.label,options:[]},a("option",this).each(function(){e={value:this.value,text:this.text,group:b},S[this.value]=e,T[b].options.push(e),this.disabled&&Q.push(this.value)})}):a("option",C).each(function(){e={value:this.value,text:this.text},S[this.value]=e,s.push(e),this.disabled&&Q.push(this.value)})}function h(b,c,d){a.each(b,function(a,b){d.push(b.text),c.push(b.value)})}function i(){var b,c=0,d=[],e=[],f=[[]];return N&&(a.each(T,function(a,b){d.push(b.label),e.push(a)}),b={values:d,keys:e,label:z.groupLabel},B?f[0][c]=b:f[c]=[b],c++),d=[],e=[],O?a.each(T,function(a,b){d.push(b.label),e.push("__group"+a),Q.push("__group"+a),h(b.options,e,d)}):h(N?T[o].options:s,e,d),b={multiple:D,values:d,keys:e,label:G},B?f[0][c]=b:f[c]=[b],f}function j(c){D&&a.isArray(c)&&(c=c[0]),u=c===b||null===c||""===c?M:c,N&&(o=S[u].group)}function k(a,b){var d=a?c._tempWheelArray:c._hasValue?c._wheelArray:null;return d?z.group&&b?d:d[t]:null}function l(){var a,b,c=[],d=0;if(D){b=[];for(d in R)c.push(S[d]?S[d].text:""),b.push(d);a=c.join(", ")}else b=u,a=S[u]?S[u].text:"";r.val(a),C.val(b)}function m(a){var b=a.attr("data-val"),c=a.hasClass("dw-msel");return D&&a.closest(".dwwl").hasClass("dwwms")?(a.hasClass("dw-v")&&(c?(a.removeClass(H).removeAttr("aria-selected"),delete R[b]):(a.addClass(H).attr("aria-selected","true"),R[b]=b)),!1):void 0}var n,o,p,q,r,s,t,u,v,w,x,y=a.extend({},c.settings),z=a.extend(c.settings,f,y),A=z.layout||(/top|bottom/.test(z.display)?"liquid":""),B="liquid"==A,C=a(this),D=z.multiple||C.prop("multiple"),E=this.id+"_dummy",F=a('label[for="'+this.id+'"]').attr("for",E),G=z.label!==b?z.label:F.length?F.text():C.attr("name"),H="dw-msel mbsc-ic mbsc-ic-"+z.checkIcon,I=z.readonly,J=z.data,K=!!J,L=K?J[0][z.dataGroup]:a("optgroup",C).length,M=K?J[0][z.dataValue]:a("option",C).attr("value"),N=L&&z.group,O=L&&!N,P=C.val()||[],Q=[],R={},S={},T={};if(z.invalid.length||(z.invalid=Q),N?(p=0,t=1):(p=-1,t=0),D)for(P&&e(P)&&(P=P.split(",")),q=0;q<P.length;q++)R[P[q]]=P[q];return g(),j(C.val()),a("#"+E).remove(),r=a('<input type="text" id="'+E+'" class="'+z.inputClass+'" placeholder="'+(z.placeholder||"")+'" readonly />'),z.showInput&&r.insertBefore(C),c.attachShow(r),C.addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),l(),c.setVal=function(a,b,f,g,h){D&&(a&&e(a)&&(a=a.split(",")),R=d.arrayToObject(a),a=a?a[0]:null),c._setVal(a,b,f,g,h)},c.getVal=function(a,b){return D?d.objectToArray(R):k(a,b)},c.getValues=c.getVal,c.getValue=k,{width:50,layout:A,headerText:!1,anchor:r,formatResult:function(a){var b,c=[];if(D){for(b in R)c.push(S[b]?S[b].text:"");return c.join(", ")}return u=a[t],S[u]?S[u].text:""},parseValue:function(a){return j(a===b?C.val():a),N?[o,u]:[u]},onValueTap:m,onValueFill:l,onBeforeShow:function(){D&&z.counter&&(z.headerText=function(){var b=0;return a.each(R,function(){b++}),b+" "+z.selectedText}),j(C.val()),N&&(w=o,c._tempWheelArray=[o,u]),g(),z.wheels=i()},onMarkupReady:function(b){b.addClass("dw-select"),a(".dwwl"+p,b).on("mousedown touchstart",function(){clearTimeout(x)}),O&&(a(".dw",b).addClass("dw-select-gr"),a('.dw-li[data-val^="__group"]',b).addClass("dw-w-gr")),D&&(b.addClass("dwms"),a(".dwwl",b).on("keydown",function(b){32==b.keyCode&&(b.preventDefault(),b.stopPropagation(),m(a(".dw-sel",this)))}).eq(t).addClass("dwwms").attr("aria-multiselectable","true"),v=a.extend({},R))},validate:function(d,e,f){var g,h,j=c.getArrayVal(!0),k=a(".dw-ul",d).eq(t);if(e===b&&D){h=R,g=0,a(".dwwl"+t+" .dw-li",d).removeClass(H).removeAttr("aria-selected");for(g in h)a(".dwwl"+t+' .dw-li[data-val="'+h[g]+'"]',d).addClass(H).attr("aria-selected","true")}if(!N||e!==b&&e!==p)u=j[t];else if(o=+j[p],o!==w){if(u=T[o].options[0].value,z.wheels=i(),!n)return c._tempWheelArray=[o,u],z.readonly=[!1,!0],clearTimeout(x),x=setTimeout(function(){n=!0,w=o,c.changeWheel([t],b,!0),z.readonly=I},1e3*f),!1}else z.readonly=I;a.each(z.invalid,function(b,c){a('.dw-li[data-val="'+c+'"]',k).removeClass("dw-v")}),n=!1},onClear:function(b){R={},r.val(""),a(".dwwl"+t+" .dw-li",b).removeClass(H).removeAttr("aria-selected")},onCancel:function(){!c.live&&D&&(R=a.extend({},v))},onDestroy:function(){r.remove(),C.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery);