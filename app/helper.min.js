(function(){var a=[].slice;!function(){var a,b;return $.datepicker.setDefaults({dateFormat:"yy-mm-dd"}),b={},a=function(){var a,c,d,e;d={text:"",textVisible:!0,textonly:!1},a=!1;for(c in b)e=b[c],null!=e.text&&(0!==d.text.length&&(d.text+=", "),d.text+=e.text),e.blocking===!0&&(a=!0);return 0!==d.text.length?d.text+="...":d.textVisible=!1,a?$("body").addClass("ui-loading-blocking"):($("body").removeClass("ui-loading-blocking"),d.textVisible=!0,d.textonly=!0,0===d.text.length&&(d.text=__("Loading")+"...")),d},pimatic.loading=function(c,d,e){setTimeout(function(){var f;switch(d){case"show":return b[c]=e,$.mobile.loading("show",a());case"hide":return delete b[c],0===function(){var a;a=[];for(f in b)a.push(f);return a}().length?($.mobile.loading("hide"),$("body").removeClass("ui-loading-blocking")):$.mobile.loading("show",a())}},1)},pimatic.loading.pendingLoadings=b,$(document).on("pagechange",function(){setTimeout(function(){var c,d;return 0!==function(){var a;a=[];for(c in b)a.push(c);return a}().length?(d=a(),$.mobile.loading("show",d)):void 0},1)}),$(document).on("vclick",".ui-loader",function(){return function(){return pimatic.pages.index.toLoginPage()}}(this)),"none"!==overthrow.support?$.mobile.Transition.prototype.scrollPage=function(){return function(){}}(this):void 0}(),$.ajaxSetup({timeout:2e4}),$(document).ajaxStart(function(){return pimatic.loading("ajax","show",{text:"loading",blocking:!0})}),$(document).ajaxStop(function(){return pimatic.loading("ajax","hide")}),$(document).ajaxError(function(){}),$(document).ready(function(){return function(){return window.applicationCache?window.applicationCache.addEventListener("updateready",function(){return window.applicationCache.status===window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),confirm("A new version of this site is available. Load it?"))?window.location.reload():void 0},!1):void 0}}(this),!1),pimatic["try"]=function(a){var b;try{return a.apply(this,arguments)}catch(c){return b=c,console.log("ignoring error: ",b)}},pimatic.tryCatch=function(a){return function(){var b;try{return a.apply(this,arguments)}catch(c){return b=c,TraceKit.report(b)}}},window.ajaxShowToast=function(a){return pimatic.showToast(null!=a.message?a.message:"done")},window.ajaxAlertFail=function(a,b,c){var d,e,f;d=null;try{d=$.parseJSON(a.responseText)}catch(g){e=g}return f=null!=(null!=d?d.message:void 0)?d.message:f=null!=c&&""!==c?c:"error"===b?__("No connection"):b,setTimeout(function(){return alert(__(f))},1),!0},$(document).ready(function(){return function(){return $("#toast").toast(),pimatic.showToast=function(a){return $("#toast").text(a).toast("show")}}}(this)),pimatic.makeIdFromName=function(){return function(a){var b,c,d,e;for(a=a.replace(/^\s+|\s+$/g,""),a=a.toLowerCase(),b="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",e="aaaaeeeeiiiioooouuuunc------",c=0,d=b.length;d>c;)a=a.replace(new RegExp(b.charAt(c),"g"),e.charAt(c)),c++;return a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}}(this),pimatic.autoFillId=function(){return function(a,b,c){var d;d="",a.subscribe(function(a){var e,f;return"add"!==c()?void(d=""):(e=b(),f=pimatic.makeIdFromName(a),(e===d||0===e.length)&&b(f),d=f)})}}(this),window.__=function(){var b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],e=d,null!=locale[d]?e=locale[d]:console.log("no translation yet:",d),f=0,g=c.length;g>f;f++)b=c[f],e=e.replace(/%s/,b);return e},null==window.console&&(window.console={log:function(){}}),TraceKit.report.subscribe(function(){return function(a){var b,c,d,e,f,g,h,i,j;for(i=a.stack,e=0,g=i.length;g>e;e++)if(c=i[e],null!=c.context)for(j=c.context,d=f=0,h=j.length;h>f;d=++f)b=j[d],b.length>200&&(c.context[d]=b.substring(0,200)+"...");return $.ajax({url:"/client-error",type:"POST",global:!1,data:{error:a}})}}(this))}).call(this);