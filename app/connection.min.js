(function(){$(document).on("pagebeforecreate",function(){var a;null==pimatic.socket&&(pimatic.socket=io.connect("/",{"connect timeout":2e4,"reconnection delay":500,"reconnection limit":2e3,"max reconnection attempts":1/0}),pimatic.socket.on("connect",function(){var a;if(pimatic.loading("socket","hide"),null!=window.applicationCache)try{return window.applicationCache.update()}catch(b){return a=b,console.log(a)}}),pimatic.socket.on("connecting",function(){return pimatic.loading("socket","show",{text:__("connecting"),blocking:!1})}),pimatic.socket.on("disconnect",function(){return pimatic.loading("socket","show",{text:__("connection lost, retrying"),blocking:!1})}),a=function(a){return"handshake unauthorized"===a&&setTimeout(pimatic.pages.index.toLoginPage,10),a=null!=a&&0!==a.length?": "+a:"",pimatic.loading("socket","show",{text:__("could not connect%s, retrying",a),blocking:!1}),setTimeout(function(){return pimatic.socket.socket.connect()},2e3)},pimatic.socket.on("error",a),pimatic.socket.on("connect_error",a),pimatic.socket.on("log",function(a){return pimatic.showToast(a.msg)}))})}).call(this);