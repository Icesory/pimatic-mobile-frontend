(function(){$(document).on("pagebeforecreate",function(){return null==pimatic.socket?(pimatic.client=new DeclApiClient(api),pimatic.socket=io("/",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:3e3,timeout:2e4}),pimatic.socket.io.on("open",function(){var a;if(pimatic.loading("socket","hide"),null!=window.applicationCache)try{return window.applicationCache.update()}catch(b){return a=b,console.log(a)}}),pimatic.socket.on("devices",function(a){return pimatic.updateFromJs({devices:a})}),pimatic.socket.on("rules",function(a){return pimatic.updateFromJs({rules:a})}),pimatic.socket.on("variables",function(a){return pimatic.updateFromJs({variables:a})}),pimatic.socket.on("pages",function(a){return pimatic.updateFromJs({devicepages:a})}),pimatic.socket.io.on("reconnect_attempt",function(){return pimatic.loading("socket","show",{text:__("connection lost, retrying"),blocking:!1})}),pimatic.socket.io.on("connect_error",function(a){return pimatic.loading("socket","show",{text:__("could not connect (%s), retrying",a.message),blocking:!1})}),pimatic.socket.io.on("connect_timeout",function(){return pimatic.loading("socket","show",{text:__("connect timed out"),blocking:!1})})):void 0})}).call(this);